{% extends "nagoyameshi/base.html" %}

{% block extra_head %}
<script>console.log("ここにheadタグに追加するCSSやJSを書く");</script>
{% endblock %}

{% block main %}
   <h3>・・・店舗検索</h3>
    <form action="" method="GET">
      <p>■カテゴリを選択</p>
      {% for category in categories %}
      <label>
        <input type="checkbox" name="category_multi" value="{{category.id}}" {% if request.GET.category == category.str_id %}checked{% endif %}>{{ category.name }}
      </label>
      {% endfor %}

      {# categoryのプルダウンを作成 #}
      <select name="category">
      <option value="">カテゴリ</option>

      {# categoriesをレンダリング #}
      {% for category in categories %}
      <option value="{{ category.id }}" {% if request.GET.category == category.str_id %}selected{% endif %}>{{ category.name }}</option>
      {% endfor %}
      </select>

      <input type="text" name="search" value="{{ request.GET.search }}" placeholder="キーワード"> 
      <input type="submit" value="検索">

    </form>

      {# views.pyで取り出したデータを表示 #}
      {% for restaurant in restaurants %}
      {# name を表示させる場合 #}
      <div>{{ restaurant.name }}</div>
      {# budget を表示させる場合#}
      <div>{{ restaurant.budget }}</div>
      {# img を表示 #}
      <div><img src="{{ MEDIA_URL }}{{ release.cover.url }}" alt="店舗画像"></div>

   
      {# 店舗のURLを用意 #}
      <div>
        <a href="{% url 'nagoyameshi:restaurant' restaurant.id %}">店舗詳細</a>
      </div>
    
      {% endfor %}

      
    {# ページの表示 #}
    {{ restaurants.number }} / {{ restaurants.paginator.num_pages }} ページ<br>

    {# 前へ #}
    {% if restaurants.has_previous %}
    <a href="{{ restaurants.first_page_link }}">&laquo; 先頭</a>
    <a href="{{ restaurants.previous_page_link }}">前へ</a>
    {% endif %}

    {# 次へ #}
    {% if restaurants.has_next %}
    <a href="{{ restaurants.next_page_link }}">次へ</a>
    <a href="{{ restaurants.end_page_link }}">最後 &raquo;</a>
    {% endif %}

{% endblock %}